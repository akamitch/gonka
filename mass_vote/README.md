# Автоматизация голосования в Governance

## Описание
Скрипт автоматизирует процесс голосования по proposal в блокчейне. Позволяет проголосовать с нескольких кошельков, введя пароль только один раз.

## Установка

1. Убедитесь, что скрипт исполняемый:
```bash
chmod +x vote_automation.sh
```

2. Убедитесь, что у вас установлен и настроен `inferenced`

## Подготовка файла с кошельками

Создайте текстовый файл (например, `wallets.txt`) со списком имен кошельков:

```
castle
wallet1
wallet2
wallet3
```

**Формат файла:**
- Один кошелек на строку
- Можно добавлять комментарии (строки начинающиеся с #)
- Пустые строки игнорируются

## Использование

### Базовый запуск:

```bash
export NODE_URL="https://your-node-url.com"
./vote_automation.sh wallets.txt 22
```

Где:
- `wallets.txt` - файл со списком кошельков
- `22` - номер proposal для голосования

### Без установки NODE_URL:

```bash
./vote_automation.sh wallets.txt 22
```
Скрипт попросит ввести NODE_URL интерактивно.

## Процесс работы

1. Скрипт запросит пароль один раз
2. Пройдет по всем кошелькам из файла
3. Для каждого кошелька выполнит голосование
4. Выведет статистику (успешные/неудачные голоса)

## Параметры голосования

Текущие параметры (можно изменить в скрипте):
- Голос: `yes`
- Gas: `2000000`
- Gas adjustment: `5.0`
- Timeout: `60s`
- Chain ID: `gonka-mainnet`

## Изменение параметров

Чтобы изменить параметры голосования, отредактируйте строку в скрипте:

```bash
./inferenced tx gov vote "$PROPOSAL_ID" yes \
    --from "$wallet" \
    --keyring-backend file \
    --unordered \
    --timeout-duration=60s \
    --gas=2000000 \
    --gas-adjustment=5.0 \
    --node "$NODE_URL/chain-rpc/" \
    --chain-id gonka-mainnet \
    --yes
```

Например, чтобы голосовать `no`:
```bash
./inferenced tx gov vote "$PROPOSAL_ID" no \
```

## Логи и отладка

Скрипт выводит:
- ✓ Успешные транзакции (зеленым)
- ✗ Ошибки (красным)
- Итоговую статистику

## Безопасность

⚠️ **Важно:**
- Пароль не сохраняется и используется только во время выполнения скрипта
- Убедитесь, что файл со скриптом имеет правильные права доступа
- Рекомендуется тестировать на testnet перед использованием на mainnet

## Примеры

### Пример 1: Голосование по proposal #22
```bash
export NODE_URL="https://rpc.example.com"
./vote_automation.sh my_wallets.txt 22
```

### Пример 2: С разными proposal
```bash
# Proposal 22
./vote_automation.sh wallets.txt 22

# Proposal 23
./vote_automation.sh wallets.txt 23
```

## Устранение проблем

**Проблема:** Ошибка "файл не найден"
**Решение:** Проверьте путь к файлу с кошельками

**Проблема:** Ошибка аутентификации
**Решение:** Проверьте правильность пароля и наличие кошельков в keyring

**Проблема:** Таймаут транзакций
**Решение:** Увеличьте `--timeout-duration` или проверьте подключение к ноде
